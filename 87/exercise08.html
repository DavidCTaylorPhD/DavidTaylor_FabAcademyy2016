<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Name Surname">
    <link rel="icon" href="media/favicon.ico">

     <title>Fab Academy 2016 - David C. Taylor</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="media/fabacademy.css" rel="stylesheet">
    
    <!-- 3D files viewer -->
    <script type="text/javascript" src="media/jsc3d_ie.min.js"></script>
	<script type="text/javascript" src="media/jsc3d.min.js"></script>
    <script type="text/javascript" src="media/jsc3d.webgl.js"></script>
    <script type="text/javascript" src="media/jsc3d.touch.js"></script>

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="bootstrap/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="bootstrap/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <!-- Load the menu file -->
    <script>
	function menu() {
					  $('#exercises').load("exercises-menu.html");
					  $('#project').load("project-menu.html");
					  $('#cclicense').load("license.html");
					  }
	</script>

  </head>

  <body onload="menu()">

    <!-- Static navbar -->
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">David C. Taylor</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="about.html">About</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Exercises <span class="caret"></span></a>
              <ul id="exercises" class="dropdown-menu" role="menu">
              </ul>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Final Project <span class="caret"></span></a>
              <ul id="project" class="dropdown-menu" role="menu">
              </ul>
            </li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">

	<!-- Insert your content here below! -->


     <h2>Embedded Programming (Mar. 23)</h1>
    
    <h3>Process</h3>
	<p>
        Below you will find my dictation, notes and documentation about the processes I went throught with regards to completing the Embeeded Programming exercise. Each of the step and processs will be covered in seperate sections. A link at the bottom of the page will take you to all of the files that I created for this exercise. 
    
    <h3>Reading the Data Sheet</h3>
	<p>I first read/skimmed the <a href="http://academy.cba.mit.edu/classes/embedded_programming/doc8183.pdf">ATMEL microcontroller data sheet</a> to become familiar with the ATTINY44 8-bit microcontroller. This was a interesting process due to the time it takes to review 286 pages and having a beginners understanding of the information as a whole. Granted there are a lot of charts, diagrams and schematics through the document, especially pages 273-286. I did gain a basic grasp of the interupt process, general information on memory, and how code can be used to access main different features of the chip.
	</p>
	
	
	<h3>Arduino IDE</h3>
        
	<p>I already had the Arduino software installed on my computer, but you can get the download and install the <a href="https://www.arduino.cc/en/Main/Software"> Arduino software</a> from their website. I than download the <a href="https://github.com/damellis/attiny/">attiny library</a> and unzipped the folder. Next,I created a "hardware" folder in the Arudino documents folder.  I than placed the unzipped "attiny-master" folder into the "hardware" folder in my Arduino documents folder, which is the Sketchbook folder. I than closed and restarted the Arduino software. I went to Arduino>Preferences and pasted "https://raw.githubusercontent.com/damellis/attiny/ide-1.6.x-boards-manager/package_damellis_attiny_index.json" into the Additional Boards Manager URL area. I than went to Tools > Boards > Boards Manager > Attiny.  I completed this process using a Mac.</p>
        
        <p class=pic><img src=media/arduino%20attiny%20get%20hub.png></p>
        <p class=pic><img src=media/arduino%20avr%20hardware%20folder.png></p>
          <p class=pic><img src=media/arduino%20avr%20board.png></p>
         <p class=pic><img src=media/arduino%20preferences.png></p>
        <p class=pic><img src=media/arduino%20attiny%20board%20selection.png></p>
          <p class=pic><img src=media/arduino%20attiny%20board%20selection2.png></p>

        
<p>I used <a href="http://highlowtech.org/?p=1695">High Low Tech site</a> as well as <a href="http://fabacademy.org/archives/2015/eu/students/aloy_ciller.mariona/p/module-seven.html">Mariona A. Ciller</a> and <a href="http://fabacademy.org/archives/2015/as/students/britov.denis/week-7.html">Denis Britov</a> exercise 8 from Fab Academy 2015 for support with this process.</p>
        
        
        <p> I setup my Arduino settings using the the information in the following images as well as uploading the code as well it is important to use the correct programmer option:</p>
        
         <p class=pic><img src=media/arduino%20board%20settings.png></p>
          <p class=pic><img src=media/tool%20setup%20in%20arduino.png></p>
         <p class=pic><img src=media/Use%20the%20uploader.png></p>
     
	<h4>Coding on the Arduino IDE</h4>
	<p>I than began experimenting with the Arduino Example codes and making changes to them, so they would work on my attiny. I made changes to the Blink code by making the lights blink faster as well as I made changes to the Button code to control the LED on my board. In preparation for the class, I used the <a href="https://cdn.sparkfun.com/assets/learn_tutorials/3/1/0/RedBoard_SIK_3.2.pdf"> SparkFun lessons</a> to help with learning C in an Arduino enviroment in Janruary because of my novice understanding. I than created a PWM code to make my LED fade up and down in power. You can see the following three codes below:
	</p>
        
             <p class=pic><img src=media/attiny%20blink1%20good.png></p>
        <p class=pic><img src=media/attiny%20button2.png></p>
          <p class=pic><img src=media/attiny%20pmw%202.png></p>
        
        <iframe width="570" height="321" src="https://www.youtube.com/embed/F4FDseBbfR8" frameborder="0" allowfullscreen></iframe>
        
        
	
	<h3>mBlock</h3>
	<p>I installed <a href="http://www.mblock.cc/download/">mBlock</a> and its Arduino zip file from <a href="https://github.com/Makeblock-official/mBlock">GitHub</a>. As a middle school teacher, I wanted to find something that I could use with students that would help them learn C through having middle step from a icon language like Scratch to an Arduino IDE. I found mBlock this past Christmas and it gives you the ability to do this in a way. You can choose the Arduino board as well as use theri robot board and a picco board too.I began experimenting with it for this exercise. I created a blink code in mBlock, which is like Scratch. It give you the ability to use an Arduino look to code while youa re using the mBlock code. Plus, it gives you the ability to than edit the mblock-Arduino like code in Arduino IDE. You can see this in the images below. The first pciture is the blink code in the mBlock software. The second images is the code in the Arduino IDE. The last image is the board selection process.</p>
    
                  <p class=pic><img src=media/mblock1.png></p>
        <p class=pic><img src=media/mblock2.png></p>
          <p class=pic><img src=media/mblock3.png></p>
        
        
<p>The down side of using this process is that you need to delete some extra code because at the begin of the Arduino IDE. You will also need to switch the board in the Arduino software to the ATTINY. During the coding process in mBlock, you need to know the pin that you are usign so you can change it. Lastly, you will need to do a little bit of editing in the IDE, but it is a nice way of transitioning to C from Scratch. For more information on please click: <a href="http://www.mblock.cc/">mBlock</a>.
	
    </p> 
    
    <h3>Cross Pack AVR</h3>
        <p> I isntalled the <a href="https://www.obdev.at/products/crosspack/index.html">Cross Pack AVR</a>. Next, I began reading the isntructions that comes with the Cross Pack. I than downloaded <a href="http://www.barebones.com/products/textwrangler/download.html"> Text Wrangler</a>, which Cross Pack recommended.</p>
        <p>I tried installing XCode onto my Mac, but I kept getting error explaining that XCode wouldn't work on my 0SX because it was to new (10.9.5). I tried following <a href="http://www.instructables.com/id/Xcode-63-on-OSX-1095-swift-12-ios-83-/">a instructables</a> on how to fix this problem. This involves you using a Apple Devlopers version of XCode 6.3.2. I could never get XCode to work on my Mac. It end up causing problems with my SSH process, because, it would not pull due to the XCode software not being a registered software with the user's permission. I ended up deleting all traces of the XCode software. I ended up not using CrossPack after speaking with Terence. Terence recommended using Sublime.</p>
        
         <p class=pic><img src=media/sublime1.png></p>

        <h3>Sublime</h3>
        
        <p>I installed <a href="https://www.sublimetext.com/3">Sublime</a>. I than begin watching videos to use Sublime, such as <a href="https://www.youtube.com/watch?v=lRDtMOppAq4"> How to Print HelloWorld on a Mac</a>. This helped me with doing some basic  C and using the sublime software. I did run into a library problem in the terminal. I did learn how to run and compile my code in terminal using<b>cc HelloWorld</b> and <b>./a.out</b>. I used the <a href="https://www.youtube.com/watch?v=ax0-h43_CVg"> Begineer video</a> which showed me how to downlaod from the apple developer the command line tools for XCode that need to be downloaded and installed. This fixed my first error issue of not being able to identify the helloworld code, but the next  error I recivied would not identify the the command of <b>cc HelloWorld2.c</b> which provided  the emssage<b>HelloWorld2.c:11.1: error: expected identifier or ')'</b> as well as I had library that I have not isntalled. I than deleted the extra <b>{}</b> and the <b>stib.lib.h</b> library from the program. When I did this and ran it again, my program wored!</p>
        
        
                 <p class=pic><img src=media/sublime1.png></p>
        <p class=pic><img src=media/sublime2.png></p>
<p class=pic><img src=media/sublime3.png></p>


        
        
<h3>C Learning</h3>
<p>I have been doing <a href="https://alison.com/courses/Diploma-in-Programming-in-C">Alison's C learning</a>. I have been doing the practice lessons as well as looking thorugh <a href="http://academy.cba.mit.edu/classes/embedded_programming/hello.ftdi.44.echo.c">hello.ftdi.44.echo.c</a> code to help learn how it works. I copied and pasted it intoText Wrangler to do this process. I did the same thing for Sublime too. Than I continued using Sublime. Next, I learned how to add the AVR library and the Arduino library to Sumblime using <a href="https://www.youtube.com/watch?v=39r1kDv-OQs">a sublime to arduino video</a></p> as well as to GitHub sites <a href="https://github.com/vancegroup-mirrors/avr-libc"> AVR lib</a> and <a href="https://github.com/Robot-Will/Stino">Robot Will for Arduino</a>.
        
        <p class=pic><img src=media/sublime4.png></p>
        
        
<p>Below is a list of resources I used to learn C: <a href="https://en.wikibooks.org/wiki/C%2B%2B_Programming/Examples/Hello_world">C++ Programming/Examples/Hello world from WikiBooks</a>,<a href="https://alison.com/courses/Diploma-in-Programming-in-C">Alison's C learning</a>, I met one-on-one with Terence for tutoring </p>
        
        
        <h3>Coding</h3>
        <p>I first started off with code from <a href="http://fabacademy.org/archives/2014/students/fagan.terence/wk6.html">Terence's page</a> providing <a href="http://fabacademy.org/archives/2014/students/fagan.terence/programs/LEDButton%20Flashy%20echoHelloWorld%20Board.zip">Adam's C code files</a> Next, Terence walked me through the code to gain an understanding of it. I learned that all the ports on the chip by defult are set to "O" as inputs. You need to turn the ones you are using on from O to 1 as outputs. This looks like <b>PORTA |= (1 << PA7)</b>. I also learned that <b>while(1){}</b> is for looping code as well as to intallize everything use<b>#int main (void)</b>. I also used the <b>-delay_ms(1000)</b> to create delays. Also, turning off the the output<b>PORTA &= ~(1 << PA7)</b></p>. I created a basic blink code in C using sublime. When you run the code in the terminal, you will need to follow the steps below from Terence's page which will create a hex file as well as run the code:
        
        <p class=pic><img src=media/terminal%20commands1.png></p>
        
        <p> The image below is my C code in sublime. I saved it to a folder called cblink with a main.c, build.sh and a program.sh files that were based on Adam's files. You can access my files at <a href="media/cblink.zip">cblink.zip</a>.</p>
        
        <p class=pic><img src=media/sublime%20code2.png></p>
        
        
       <p> A helpful terminal command for identifying the usb connections for making sure your computer is recognizing the chips through USB is <b>system_profiler SPUSBDataType</b>  </p>
       
        <p>I did have problems with my board when compiling, hex and running my code. You can see the issue in the image below. After doing so research with Terence, we found that the board is either bricked or just not recieving power for some reason. I decide to make another board. After making a new board and hand soldering this new one, I still recieved the same error message of <b>avrdude: initialization failed, rc=-1</b>. </p>
        
         <p class=pic><img src=media/terminal%20hex%20issue.png></p>
        
        <p>Success was found on the third board created, which was made by colleague. I ran the commands on his board and my board, and they both blinked. I ran it on two boards to double check my work. I learned that soldering your connections well is very important!</p>
        
        <p class=pic><img src=media/terminal%20blink%20succes.png></p>
        <p class=pic><img src=media/success%20blink%20c%20code.jpeg></p>
        <p class=pic><img src=media/my%20working%20board.JPG</p>
        <iframe width="420" height="315" src="https://www.youtube.com/embed/t_4WJWXLFTQ" frameborder="0" allowfullscreen></iframe>
        
        
        <p>I did learn through this process the importance of taking your time, clean surface mount solder practice, and learn the foundations of C coding. Furthermore, I learned that it is important to create folders with your codes name but to keep the file name of the code to be <b>main.c</b>. It easier to keep folders organized with the neccessary files in them, than to have all these files with different file names codes the codes and commands, which can lead to more mistakes. You can see this in the image below:</p>
        
         <p class=pic><img src=media/cblink%20folder.png></p>
        
        <h3>Terminal Commands</h3>
        
        <p>Important to remember to compile and hex your code using the following commands:</p>
        <p><b><$avr-gcc -w -Os -DF_CPU=2000000UL -mmcu=attiny44 -c -o main.o main.c</b></p>
        <p><b>$avr-gcc -w -mmcu=attiny44 main.o -o main</b></p>
        <p><b>$avr-objcopy -O ihex -R .eeprom main main.hex</b></p>
        
        <p>Use the command below to run your code:</p>
    
            <p><b>$sudo avrdude -F -V -c usbtiny  -p ATtiny44 -P usb -U flash:w:main.hex</b></p>
        
        <p>Diagrams below are very helpful for identifying the correction pins when using the Arduino IDE and coding in C:</p>
         <p class=pic><img src=media/tiny%20diagram.PNG></p>
        <p class=pic><img src=media/attiny44%20diagram2.png></p>
        
        <h3>Corrections</h3>
        <p>Using the diagram of the ATTINY44 is very helpful in lookign at how your code will work. I also made me discovery that I may need to change the schematic of the button  due to where it is connected. I made a change to my board and corrected a new version all together due to the corrections I did on my button connections. I resdesigned it and you can see the change in my new board below:</p>
        
                 <p class=pic><img src=media/TINY44%20CORRECTED.png></p>
        
        <p>I learned that either the C code in sublime and the Arduino IDE button codes would not work. This is why I am going to build another board from the new design. You can see that in the code below:</p>
        <p class=pic><img src=media/C%20BUTTON%20CODE.png></p>
        <p class=pic><img src=media/attiny%20button2.png></p>
        
    <h3>Project Files</h3>
	<p>
	<p>This is a button to access the files created for this exercise course for all of the above softwares.</p>
            <p><a class="btn btn-primary" href="
https://drive.google.com/folderview?id=0Bxi9iaM7VRHYUlhDcHItcFhBQWc&usp=sharing
" role="button">View more &raquo;</a></p>
    <!-- End of your content -->

    </div> <!-- /container -->

	<!-- footer -->
    
    <footer id="footer">
        <p id="cclicense">
                </p>
        <p class="license">
        Theme: <a href="https://github.com/openp2pdesign/FabAcademy_Template">Fab Academy Template</a> by <a href="http://openp2pdesign.org">Massimo Menichinelli</a> <br>
        Based on <a href="http://getbootstrap.com/">Twitter Bootstrap</a>+<a href="http://jquery.com/">JQuery</a>+<a href="https://code.google.com/p/google-code-prettify/">google-code-prettify</a>+<a href="http://jmblog.github.io/color-themes-for-google-code-prettify/github/">GitHub theme for google-code-prettify</a>+<a href="https://code.google.com/p/jsc3d/">JSC3D</a>+<a href="https://github.com/thegrubbsian/jquery.ganttView">jquery.ganttView</a>.
        </p>
    </footer>
    

	<!-- Do not touch this! -->
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="media/jquery-1.9.1.min.js"></script>
    
    <!-- Syntax Highlighter -->
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js">
    </script>
    <!-- From https://github.com/jmblog/color-themes-for-google-code-prettify -->
    <link href="media/github.css" type="text/css" rel="stylesheet">
	<script type="text/javascript">
	  !function ($) {
		$(function(){
		  window.prettyPrint && prettyPrint()   
		})
	  }(window.jQuery)
	</script>
	
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="bootstrap/js/ie10-viewport-bug-workaround.js"></script>

  </body>
</html>
